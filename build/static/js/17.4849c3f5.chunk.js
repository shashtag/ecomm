(this.webpackJsonpkalafax=this.webpackJsonpkalafax||[]).push([[17],{337:function(e,a,t){"use strict";t.r(a);var n=t(24),s=t(3),r=t(84),o=t(27),i=t(29),c=t(45),d=t(148),l=t(94),u=t(15),p=t.n(u),m=t(0),j=t(109),b=t(19),h=t(53),g=t(108),v=t(18),x=t(135),O=t(136),f=t(1),y=Object(r.a)((function(e){return{root:Object(s.a)({padding:"0 15px",paddingBottom:e.spacing(20),marginTop:e.spacing(4),minHeight:"100vh"},e.breakpoints.up("md"),{padding:"0vh 3.2%",paddingBottom:e.spacing(20)}),input:{width:"100%",marginBottom:e.spacing(1)}}}));a.default=function(){var e,a,t,s,r=Object(b.g)(),u=Object(m.useContext)(v.a),_=u.usrBaseInfo,w=u.setUsrBaseInfo,P=u.pass,B=u.setPass,S=u.rePass,k=u.setRePass,T=u.curPass,C=u.setCurPass,R=u.setLoading,E=u.setSnackbar,N=u.usrAdresses,I=u.setUsrAdresses,A=y(),L=Object(o.a)(),U=Object(j.a)(),q=U.register,z=U.handleSubmit,D=U.errors,H=Object(j.a)(),V=H.register,W=H.handleSubmit,K=H.errors;return Object(m.useEffect)((function(){return N||Object(h.b)(R,I),function(){}}),[]),localStorage.getItem("Token")?Object(f.jsxs)(i.a,{container:!0,item:!0,direction:"column",className:A.root,children:[Object(f.jsxs)(i.a,{container:!0,xs:12,item:!0,justify:"space-between",children:[Object(f.jsxs)(i.a,{item:!0,children:[Object(f.jsx)(c.a,{variant:"h2",style:{fontWeight:"bold",marginBottom:L.spacing(.5)},color:"secondary",children:null===_||void 0===_?void 0:_.full_name}),Object(f.jsxs)(c.a,{variant:"h5",style:{marginBottom:L.spacing(5),opacity:"0.8"},color:"secondary",children:["Email : ",null===_||void 0===_?void 0:_.email]})]}),_.is_artist?null:Object(f.jsx)(i.a,{item:!0,children:Object(f.jsx)(d.a,{onClick:function(){Object(g.d)({is_first_login:!0,is_artist:!0},R,E,r,!1,!0)},variant:"contained",size:"large",color:"secondary",type:"submit",style:Object(n.a)(Object(n.a)({},L.palette.background.gradient),{},{marginTop:L.spacing(1),padding:"1rem 1.5rem"}),children:Object(f.jsx)(c.a,{variant:"h5",children:"Become an artist"})})})]}),Object(f.jsx)(i.a,{item:!0,children:Object(f.jsx)(c.a,{variant:"h4",style:{marginBottom:L.spacing(3)},color:"secondary",children:"Update phone"})}),Object(f.jsx)("form",{style:{width:"100%"},autoComplete:"off",onSubmit:z((function(){var e={phone_number:_.phone_number};Object(g.d)(e,R,E)})),children:Object(f.jsxs)(i.a,{container:!0,item:!0,spacing:2,children:[Object(f.jsx)(i.a,{item:!0,xs:12,md:6,children:Object(f.jsx)(l.a,{type:"tel",className:A.input,label:"Phone Number",name:"phone",variant:"outlined",color:"secondary",defaultValue:_.phone_number,onChange:function(e){w(Object(n.a)(Object(n.a)({},_),{},{phone_number:e.target.value.trim()}))},InputLabelProps:{shrink:!0},placeholder:"Enter new Phone number",inputRef:q({required:"Phone Number is required",pattern:{value:/([+]?\d{1,2}[.-\s]?)?(\d{3}[.-]?){2}\d{4}/,message:"Invalid Phone Number"}}),error:Boolean(D.phone),helperText:null===(e=D.phone)||void 0===e?void 0:e.message})}),Object(f.jsx)(i.a,{item:!0,xs:12,md:6,children:Object(f.jsx)(d.a,{style:{marginBottom:L.spacing(4),padding:"18px 80px",borderRadius:"4px",background:L.palette.secondary.light},variant:"contained",size:"large",type:"submit",color:"secondary",className:A.loginButton,children:Object(f.jsx)(c.a,{variant:"h5",children:"Save"})})})]})}),Object(f.jsx)(i.a,{item:!0,children:Object(f.jsx)(c.a,{variant:"h4",style:{marginBottom:L.spacing(3)},color:"secondary",children:"Update password"})}),Object(f.jsx)("form",{style:{width:"100%"},autoComplete:"off",onSubmit:W((function(){R(!0);var e={new_password:T,re_new_password:P,current_password:S},a={method:"post",url:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_URL,"auth/users/set_password/"),headers:{Authorization:"Token ".concat(localStorage.getItem("Token"))},data:e};p()(a).then((function(e){R(!1)})).catch((function(e){var a,t,n,s,r;R(!1),E({value:!0,message:(null===(a=e.response.data.email)||void 0===a?void 0:a[0])||(null===(t=e.response.data.password)||void 0===t?void 0:t[0])||(null===(n=e.response.data.phone_number)||void 0===n?void 0:n[0])||(null===(s=e.response.data.date_of_birth)||void 0===s?void 0:s[0])||(null===(r=e.response.data.full_name)||void 0===r?void 0:r[0]),type:"error"})}))})),children:Object(f.jsxs)(i.a,{container:!0,item:!0,spacing:2,children:[Object(f.jsx)(i.a,{item:!0,xs:12,md:6,children:Object(f.jsx)(l.a,{type:"password",className:A.input,label:"Current Password",name:"curpass",variant:"outlined",color:"secondary",value:T,onChange:function(e){C(e.target.value.trim())},InputLabelProps:{shrink:!0},placeholder:"Enter your current password",inputRef:V({required:"Current password is required"}),error:Boolean(K.curpass),helperText:null===(a=K.curpass)||void 0===a?void 0:a.message})}),Object(f.jsx)(i.a,{item:!0,xs:12,md:6,children:Object(f.jsx)(l.a,{className:A.input,label:"New password",name:"password",type:"password",variant:"outlined",color:"secondary",defaultValue:P,onChange:function(e){B(e.target.value)},InputLabelProps:{shrink:!0},placeholder:"Enter password",inputRef:V({required:"Please enter a password"}),error:Boolean(K.password),helperText:null===(t=K.password)||void 0===t?void 0:t.message})}),Object(f.jsx)(i.a,{item:!0,xs:12,md:6,children:Object(f.jsx)(l.a,{className:A.input,label:"Re-Enter Password",name:"rePass",type:"password",variant:"outlined",color:"secondary",defaultValue:S,onChange:function(e){k(e.target.value)},InputLabelProps:{shrink:!0},placeholder:"Re-enter password to confirm",inputRef:V({required:"Please Re-enter your Password",validate:function(e){return P!==e?"Password does not match":null}}),error:Boolean(K.rePass),helperText:null===(s=K.rePass)||void 0===s?void 0:s.message})}),Object(f.jsx)(i.a,{item:!0,xs:12,md:6,children:Object(f.jsx)(d.a,{style:{marginBottom:L.spacing(4),padding:"18px 80px",borderRadius:"4px",background:L.palette.secondary.light},variant:"contained",size:"large",type:"submit",color:"secondary",className:A.loginButton,children:Object(f.jsx)(c.a,{variant:"h5",children:"Save"})})})]})}),Object(f.jsx)(i.a,{item:!0,children:Object(f.jsx)(c.a,{variant:"h4",style:{marginBottom:L.spacing(3)},color:"secondary",children:"Address"})}),Object(f.jsxs)(i.a,{container:!0,item:!0,spacing:8,children:[N?null===N||void 0===N?void 0:N.map((function(e,a){return Object(f.jsx)(i.a,{item:!0,xs:12,sm:6,md:4,children:Object(f.jsx)(x.a,{name:null===_||void 0===_?void 0:_.full_name,id:e.a_id,city:e.city,pincode:e.pin_code,state:e.state,street:e.street,type:e.address_type})},a)})):null,Object(f.jsx)(i.a,{item:!0,xs:12,sm:6,md:4,children:Object(f.jsx)(O.a,{})})]})]}):Object(f.jsx)(b.a,{to:"/login"})}}}]);
//# sourceMappingURL=17.4849c3f5.chunk.js.map